{"uid":"ffcd1272d68c0dcf","name":"Авторизация оператора с валидными данными","fullName":"stilsoft.test_murom_allure.MuromTest#test_auth_operator","historyId":"4353e23d4bb20748fcff69393a73c919","time":{"start":1728299241312,"stop":1728299241392,"duration":80},"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E7080B0>\n\n    @allure.severity('blocker')\n    @allure.feature('api тесты')\n    @allure.story('Тесты авторизации')\n    @allure.title('Авторизация оператора с валидными данными')\n    def test_auth_operator(self):\n        warnings.filterwarnings('ignore')\n>       self.create_operator_user()\n\nstilsoft\\test_murom_allure.py:160: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nstilsoft\\test_murom_allure.py:142: in create_operator_user\n    resp = requests.post(self.base_url+'/api/data/security/user', headers = self.api.get_token(), json = body_, verify = False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"base_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"pytestconfig","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"delete_output_dir","time":{"start":1728299239232,"stop":1728299239232,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E7080B0>\n\n    @allure.severity('blocker')\n    @allure.feature('api тесты')\n    @allure.story('Тесты авторизации')\n    @allure.title('Авторизация оператора с валидными данными')\n    def test_auth_operator(self):\n        warnings.filterwarnings('ignore')\n>       self.create_operator_user()\n\nstilsoft\\test_murom_allure.py:160: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nstilsoft\\test_murom_allure.py:142: in create_operator_user\n    resp = requests.post(self.base_url+'/api/data/security/user', headers = self.api.get_token(), json = body_, verify = False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","steps":[],"attachments":[{"uid":"c4459c6ead765fce","name":"log","source":"c4459c6ead765fce.txt","type":"text/plain","size":253}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[],"labels":[{"name":"epic","value":"MUROM"},{"name":"story","value":"Тесты авторизации"},{"name":"feature","value":"api тесты"},{"name":"severity","value":"blocker"},{"name":"parentSuite","value":"stilsoft"},{"name":"suite","value":"test_murom_allure"},{"name":"subSuite","value":"MuromTest"},{"name":"host","value":"1-otspo-60"},{"name":"thread","value":"40460-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"stilsoft.test_murom_allure"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"ffcd1272d68c0dcf.json","parameterValues":[]}