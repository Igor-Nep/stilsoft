{"uid":"6a0d50bcc99198c7","name":"Получение списка модулей","fullName":"stilsoft.test_murom_allure.MuromTest#test_module_list","historyId":"d092cae2a5b3986c53d2f13764b7c5dc","time":{"start":1728299239232,"stop":1728299239331,"duration":99},"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E459A60>\n\n    @allure.severity('minor')\n    @allure.feature('api тесты')\n    @allure.story('Тест модулей')\n    @allure.title('Получение списка модулей')\n    def test_module_list(self):\n        warnings.filterwarnings('ignore')\n        with allure.step('Получить список модулей из system/module'):\n            logger.info('Logged INFO сообщение:')\n>           resp = requests.get(self.base_url+'/api/data/system/module', headers=self.api.get_token(), verify=False)\n\nstilsoft\\test_murom_allure.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"base_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"pytestconfig","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"delete_output_dir","time":{"start":1728299239232,"stop":1728299239232,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E459A60>\n\n    @allure.severity('minor')\n    @allure.feature('api тесты')\n    @allure.story('Тест модулей')\n    @allure.title('Получение списка модулей')\n    def test_module_list(self):\n        warnings.filterwarnings('ignore')\n        with allure.step('Получить список модулей из system/module'):\n            logger.info('Logged INFO сообщение:')\n>           resp = requests.get(self.base_url+'/api/data/system/module', headers=self.api.get_token(), verify=False)\n\nstilsoft\\test_murom_allure.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","steps":[{"name":"Получить список модулей из system/module","time":{"start":1728299239232,"stop":1728299239321,"duration":89},"status":"broken","statusMessage":"KeyError: 'access_token'\n","statusTrace":"  File \"C:\\work\\WHPython\\stilsoft\\test_murom_allure.py\", line 40, in test_module_list\n    resp = requests.get(self.base_url+'/api/data/system/module', headers=self.api.get_token(), verify=False)\n                                                                         ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\work\\WHPython\\stilsoft\\ApiRes.py\", line 73, in get_token\n    bearer = (f'Bearer {resp.json()[\"access_token\"]}')\n                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[{"uid":"3965f7c0b6c04ab","name":"log","source":"3965f7c0b6c04ab.txt","type":"text/plain","size":331}],"parameters":[],"attachmentStep":false,"stepsCount":1,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[],"labels":[{"name":"story","value":"Тест модулей"},{"name":"epic","value":"MUROM"},{"name":"feature","value":"api тесты"},{"name":"severity","value":"minor"},{"name":"parentSuite","value":"stilsoft"},{"name":"suite","value":"test_murom_allure"},{"name":"subSuite","value":"MuromTest"},{"name":"host","value":"1-otspo-60"},{"name":"thread","value":"40460-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"stilsoft.test_murom_allure"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"minor","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"6a0d50bcc99198c7.json","parameterValues":[]}