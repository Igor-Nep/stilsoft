{"uid":"2dc39e2948a0b604","name":"Тест стейта поворотного устройства","fullName":"stilsoft.test_murom_allure.MuromTest#test_ch_881","historyId":"6295f835b8435b4405c6f1fa8eedf9bb","time":{"start":1728299239376,"stop":1728299239445,"duration":69},"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E6E7920>\n\n    @allure.severity('normal')\n    @allure.feature('api тесты')\n    @allure.story('Тест модулей')\n    @allure.title('Тест стейта поворотного устройства')\n    def test_ch_881(self):\n        warnings.filterwarnings('ignore')\n    \n>       body_1t = '{\"parent\":null,\"archived\":false,\"enabled\":true,\"group\":\"00000000-0000-0000-0000-000000000000\",\"id\":'+f'\"{self.api.get_881()}\",\"node\":\"{self.api.get_node()}\"'+',\"title\":\"Поворотное устройство\",\"zone\":null,\"subsystem\":\"misc\",\"type\":\"sdp881\",\"settings\":{\"ip\":\"172.18.18.22\",\"port\":7001'+'}'+'}'\n\nstilsoft\\test_murom_allure.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nstilsoft\\ApiRes.py:260: in get_881\n    for i in range (0, int(self.get_module_count())):\nstilsoft\\ApiRes.py:104: in get_module_count\n    resp = requests.get(self.url+'/api/data/system/module', headers=self.get_token(), verify=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"pytestconfig","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_verify_url","time":{"start":1728299239231,"stop":1728299239231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"delete_output_dir","time":{"start":1728299239232,"stop":1728299239232,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"broken","statusMessage":"KeyError: 'access_token'","statusTrace":"self = <test_murom_allure.MuromTest object at 0x000002D56E6E7920>\n\n    @allure.severity('normal')\n    @allure.feature('api тесты')\n    @allure.story('Тест модулей')\n    @allure.title('Тест стейта поворотного устройства')\n    def test_ch_881(self):\n        warnings.filterwarnings('ignore')\n    \n>       body_1t = '{\"parent\":null,\"archived\":false,\"enabled\":true,\"group\":\"00000000-0000-0000-0000-000000000000\",\"id\":'+f'\"{self.api.get_881()}\",\"node\":\"{self.api.get_node()}\"'+',\"title\":\"Поворотное устройство\",\"zone\":null,\"subsystem\":\"misc\",\"type\":\"sdp881\",\"settings\":{\"ip\":\"172.18.18.22\",\"port\":7001'+'}'+'}'\n\nstilsoft\\test_murom_allure.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nstilsoft\\ApiRes.py:260: in get_881\n    for i in range (0, int(self.get_module_count())):\nstilsoft\\ApiRes.py:104: in get_module_count\n    resp = requests.get(self.url+'/api/data/system/module', headers=self.get_token(), verify=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ApiRes.ApiRes object at 0x000002D56E57B9B0>\n\n    def get_token(self) -> dict: #возвращение токена с ключом\n        \"\"\" отправляет в auth/login логин и пароль admin adm777, возвращает токен в формате ключ 'Authorization' и значением 'Bearer <тело токена>' \"\"\"\n        creds = {\n            'login': 'admin',\n            'password': 'adm777'\n            }\n        resp = requests.post(self.url+'/api/auth/login', json=creds, verify=False)\n>       bearer = (f'Bearer {resp.json()[\"access_token\"]}')\nE       KeyError: 'access_token'\n\nstilsoft\\ApiRes.py:73: KeyError","steps":[],"attachments":[{"uid":"bafb8344f014cbac","name":"log","source":"bafb8344f014cbac.txt","type":"text/plain","size":252},{"uid":"1566cc50fb571ef","name":"stdout","source":"1566cc50fb571ef.txt","type":"text/plain","size":1}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":2},"afterStages":[],"labels":[{"name":"story","value":"Тест модулей"},{"name":"epic","value":"MUROM"},{"name":"feature","value":"api тесты"},{"name":"severity","value":"normal"},{"name":"parentSuite","value":"stilsoft"},{"name":"suite","value":"test_murom_allure"},{"name":"subSuite","value":"MuromTest"},{"name":"host","value":"1-otspo-60"},{"name":"thread","value":"40460-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"stilsoft.test_murom_allure"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2dc39e2948a0b604.json","parameterValues":[]}